<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Padrões de Projetos Comportamentais</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Padrões de Projetos Comportamentais</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_strategy_estratégia">1. Strategy (Estratégia)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_definição">1.1. Definição</h3>
<div class="paragraph">
<p>"O padrão Strategy define uma família de algoritmos, encapsula cada um deles e os torna intercambiáveis. A estratégia deixa o algoritmo variar independentemente dos clientes que o utilizam" <a href="#UCPP">[UCPP]</a>.</p>
</div>
<div class="paragraph">
<p>Em outras palavras, a partir de um conjunto de algoritmos, permite que classes possam trocar tais algoritmos por uma outra implementação, até mesmo em tempo de execução.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aplicabilidade">1.2. Aplicabilidade</h3>
<div class="paragraph">
<p>Pode ser aplicado quando:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>o comportamento de um método (implementação de um algoritmo) precisa ser diferente em classes distintas e/ou mudar em tempo de execução;</p>
</li>
<li>
<p>determinadas classes devem ter um comportamento específico (método) e outras não;</p>
</li>
<li>
<p>não deseja-se que uma alteração em uma super classe afete sub classes.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_modelagem_do_padrão">1.3. Modelagem do Padrão</h3>
<div class="imageblock">
<div class="content">
<img src="../../images/patterns/strategy/strategy-base-class-diagram.png" alt="strategy base class diagram">
</div>
</div>
<div class="paragraph">
<p>A classe <code>Estrategista</code> é que que irá usar as estratégias, que são representadas pelas classes que implementam os comportamentos.
Cada comportamento (estratégia) é normalmente definido como uma interface. Assim, podem existir N implementações de cada comportamento (diferentes estratégias).</p>
</div>
<div class="paragraph">
<p>Perceba que a relação entre a <code>Estrategista</code> e os comportamentos não é herança, mas pode ser uma associação normal, composição ou agregação. Cada comportamento não é implementado como uma subclasse da <code>Estrategista</code>, cada tipo de comportamento estará contido como um atributo dentro da <code>Estrategista</code>. Por isso é comum representar como agregação/composição. Definindo o comportamento como atributo é que nos permite alterar em tempo de execução sua implementação.</p>
</div>
<div class="paragraph">
<p>O comportamento em si é definido por um método na interface. No exemplo, o método é <code>executarComportamentoA()</code> para o <code>ComportamentoA</code>. O nome do método é o desenvolvedor quem define, normalmente sendo um nome que faça sentido para o sistema.
A assinatura do método também é livre. Neste exemplo o método não recebe parâmetros e retorna um tipo genérico <code>T</code>. O tipo do retorno vai depender das suas necessidades. Veja os exemplos concretos na seção a seguir.</p>
</div>
<div class="paragraph">
<p>Podem existir diferentes classes filhas desta <code>Estrategista</code>. Cada classe filha podem ter comportamentos diferentes umas das outras.
Com o padrão Strategy, o comportamento de qualquer classe (mãe ou filha) pode mudar em tempo de execução, de acordo com os requisitos do sistema.</p>
</div>
<div class="paragraph">
<p>Um projeto de exemplo para o diagrama apresentado está disponível <a href="modelagem">aqui</a>. Ele deve ser alterado para incluir as mudanças necessárias para o problema específico que você estiver resolvendo com o padrão.</p>
</div>
</div>
<div class="sect2">
<h3 id="_princípios_utilizados">1.4. Princípios utilizados</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Composition_over_inheritance">Favorecer composição no lugar de herança</a>.</p>
</li>
<li>
<p><a href="https://tuhrig.de/programming-to-an-interface/">Programar para uma "interface" não uma implementação</a> (GoF): declaramos variáveis com tipos abstratos (uma interface de comportamento) e usamos tipos concretos (uma classe que implementa um comportamento) apenas na instanciação.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Open–closed_principle">Open/Closed Principle (OCP)</a>, pois separa as partes que mudam (os comportamentos) de dentro da classe que utiliza eles. Isto torna a classe "aberta para extensão e fechada para modificação" (em relação aos comportamentos).</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle (SRP)</a> pois a classe que usa os comportamentos não tem a responsabilidade de implementar estes comportamentos.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle">Liskov Substitution Principle (LSP)</a> pois podemos substituir um comportamento por qualquer implementação dele, de forma transparente, até mesmo em tempo de execução, sem que sejam necessárias alterações no código interno da classe que utiliza tais comportamentos.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Interface_segregation_principle">Interface Segregation Principle (ISP)</a>, pois estamos definindo diferentes interfaces com multiplas implementações específicas, no lugar juntar estas diferentes implementações apenas nas classes que utilizam tais comportamentos.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_exemplos">1.5. Exemplos</h3>
<div class="sect3">
<h4 id="_leitura_de_arquivos_de_retorno_de_boletos_bancários">1.5.1. Leitura de arquivos de retorno de boletos bancários.</h4>
<div class="paragraph">
<p>Arquivos de retorno são enviados pelos bancos às empresas, fornecendo uma lista de boletos
pagos por clientes, para que tais empresas possam registrar o pagamento desses boletos
em seus sistemas. Os bancos utilizam um arquivo de texto com campos de comprimento fixo, onde não existe um caractere delimitador. Cada campo tem uma quantidade fixa de caracteres. Se o valor possui menos caracteres do que deveria, o tamanho é completado com espaços em branco.</p>
</div>
<div class="paragraph">
<p>Um aplicação na empresa recebedora dos boletos deve ler tais arquivos para extrair os dados
e normalmente gravar em um banco de dados. Existem diferentes formatos para tais arquivos
e cada banco pode utilizar um formato diferente. Atualmente existem inúmeros projetos em diferentes linguagens para fazer a leitura de tais arquivos, /retorno-boletophp[como este]. Vamos implementar um solução simplificada aqui apenas para efeitos didáticos.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Apesar de atualmente termos formatos de arquivos mais utilizados como JSON e XML, formatos como o mencionado ainda são bastante utilizados, principalmente no meio acadêmico, por serem simplista. Um outro exemplo de tais formatos são os arquivos <a href="https://pt.wikipedia.org/wiki/Comma-separated_values">CSV</a>. Mas em aplicações Web e mobile, o mais comum é o uso de JSON e XML.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Para este exemplo, vamos considerar que o Banco do Brasil usa um tipo de arquivo onde cada linha com as informações sobre o pagamento de um boleto contém os seguintes campos, separados por ponto-e-vírgula:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>id do boleto com 10 dígitos</p>
</li>
<li>
<p>código do banco onde o boleto foi pago, com 3 dígitos</p>
</li>
<li>
<p>data vencimento no formato dd/mm/yyyy</p>
</li>
<li>
<p>data pagamento no formato dd/mm/yyyy</p>
</li>
<li>
<p>CPF do cliente com 11 dígitos (sem . e -)</p>
</li>
<li>
<p>valor do boleto no formato decimal 10.2</p>
</li>
<li>
<p>multa por atraso no formato decimal 10.2</p>
</li>
<li>
<p>juros no formato no formato decimal 10.2</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Mas digamos que você também precisa receber arquivos do Bradesco que possui o seguinte formato:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>id do boleto com 10 dígitos</p>
</li>
<li>
<p>código do banco onde o boleto foi pago, com 3 dígitos</p>
</li>
<li>
<p>*agência onde o boleto foi pago, com 6 dígitos</p>
</li>
<li>
<p>*conta do cliente para possível extorno de pagamento, com 9 dígitos</p>
</li>
<li>
<p>data vencimento no formato dd/mm/yyyy</p>
</li>
<li>
<p>*data/hora pagamento no formato dd/mm/yyyy hh:nn:ss</p>
</li>
<li>
<p>*CPF do cliente com 11 dígitos (com . e -)</p>
</li>
<li>
<p>valor do boleto no formato decimal 10.2</p>
</li>
<li>
<p>multa por atraso no formato decimal 10.2</p>
</li>
<li>
<p>juros no formato no formato decimal 10.2</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*<em>Campos adicionais ou diferentes do formato anterior.</em></p>
</div>
<div class="paragraph">
<p>Um diagrama de classes para tal implementação pode ser como abaixo.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/patterns/strategy/retorno-boleto-class-diagram.png" alt="retorno boleto class diagram"></span></p>
</div>
<div class="paragraph">
<p>O código fonte com uma implementação de exemplo pode ser obtido <a href="retorno-boleto">aqui</a> (<a href="https://kinolien.github.io/gitzip/?download=/manoelcampos/padroes-projetos/tree/master/comportamentais/strategy/retorno-boleto">zip</a>).
Tente primeiro fazer sua implementação a partir da leitura do diagrama,
para depois analisar o código disponibilizado.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Uma implementação em Node.js está disponível em <a href="javascript/retorno-boleto-js">retorno-boleto-js</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_detalhes_de_implementação">1.6. Detalhes de Implementação</h3>
<div class="paragraph">
<p>Mesmo que uma classe não tenha um determinado comportamento, como o definido pela interface <code>ComportamentoA</code>, haverá uma associação entre a classe e o comportamento.
Se a classe não precisar de uma implementação de tal comportamento, o atributo que representa a associação pode estar nulo. Ao tentar usar o comportamento é gerada a exceção <code>NullPointerException</code>.</p>
</div>
<div class="paragraph">
<p>Para resolver isso, podemos criar uma classe que tenha uma implementação vazia para o comportamento, ou seja, que não faz nada. Isto normalmente pode ser implementado pelo padrão Null Object que veremos posteriormente.</p>
</div>
<div class="paragraph">
<p>Se a classe estrategista é obrigada a ter um determinado comportamento,
para evitar <code>NullPointerException</code>, podemos não incluir um construtor sem parâmetros e inclui um que exija uma implementação de estratégia a ser usada.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modelagem_convencional_sem_o_padrão_strategy">2. Modelagem convencional sem o padrão Strategy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A modelagem convencional de diferentes comportamentos sem a aplicação do padrão Strategy requer o uso de herança para os diferentes comportamentos e é visualmente mais simples.
No entanto, tal implementação tem algumas características que podem ser um problema (ou não), dependendo dos requisitos do seu sistema, por não permitir:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>alterar um comportamento em tempo de execução;</p>
</li>
<li>
<p>compartilhar implementações de um mesmo comportamento entre diferentes classes filhas, levando à duplicação de código (que deve ser evitado ao máximo);</p>
</li>
<li>
<p>combinar comportamentos distintos em um só, reaproveitando código.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/patterns/strategy/no-strategy-class-diagram.png" alt="no strategy class diagram"></span></p>
</div>
<div class="sect2">
<h3 id="_como_não_implementar_uma_solução_para_um_problema">2.1. Como não implementar uma solução para um problema</h3>
<div class="paragraph">
<p>Uma solução sem utilizar o padrão Strategy normalmente é implementada por meio de uma única classe, a qual chamaremos de <code>NaoEstrategista</code>. Não será mostrado nem ao menos um diagrama, pois a solução seria composta de fato apenas por esta classe. Ela então teria métodos como <code>T executarComportamentoA()</code>. Todas as implementações deste "Comportamento A" seriam incluídas no método citado.</p>
</div>
<div class="paragraph">
<p>Para o exemplo do retorno de boletos bancários, isto significa que tal método seria algo como:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public void processar(String nomeArquivo){
    if(nomeArquivo.contains("banco-brasil")){
        //processa arquivo do Banco do Brasil
    }
    else if(nomeArquivo.contains("bradesco")){
        //processa arquivo do Bradesco
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tal código é extremamente mais simples, tem uma única classe e tudo é feito em um único método.
Apesar de parecer muito melhor por simplificar as coisas e dar a impressão que estamos usando o princípio <a href="https://pt.wikipedia.org/wiki/Princípio_KISS">KISS</a>, não chamaria esta solução de simples, mas simplista e ingênua. Soluções simplistas normalmente vão lhe trazer dores de cabeça para manutenção do software.</p>
</div>
<div class="paragraph">
<p>Considerando que podemos ter diferentes formatos de arquivos para bancos distintos e que precisamos processar arquivos de vários bancos, esta solução apresenta alguns problemas. O método <code>processar</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vai ficar longo e possivelmente confuso;</p>
</li>
<li>
<p>não tem uma única responsabilidade (viola o princípio <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">SRP</a>), pois ele processa arquivos de diferentes bancos, no lugar de processar arquivos de um banco específico;</p>
</li>
<li>
<p>cada vez que um novo banco precisar ser incluído, o código precisará ser alterado (viola o princípio <a href="https://en.wikipedia.org/wiki/Open–closed_principle">OCP</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>O problema da violação do OCP é o mais problemático aqui. O uso de <em>if&#8217;s</em> (ou qualquer estrutura condicional como <code>switch</code>) para decidir qual algoritmo será executado em cada situação deixa claro que uma nova condição precisará ser adicionada sempre que um novo banco precisar ser suportado. Se em outros lugares do sistema você precisa realizar outras tarefas com estes arquivos de retorno, tende-se a repetir esta mesma cadeia de <em>if&#8217;s</em>.
Por exemplo, se em um lugar do sistema você precisa processar os arquivos e incluir os dados em um banco de dados e em outro você precisa processar e gerar PDFs com comprovantes de pagamentos ou enviar emails de notificação, em cada um desses locais você precisará deste bloco de <em>if&#8217;s</em>.
O problema surge quando você precisar incluir um novo banco e tiver que incluir um novo <em>if</em> em cada um desses locais.
Você pode simplesmente esquecer de adicionar tal <em>if</em> em todos os locais necessários e o recurso funcionar em parte do sistema e em outras partes não.</p>
</div>
</div>
<div class="sect2">
<h3 id="_modelagem_do_padrão_utilizando_programação_funcional">2.2. Modelagem do Padrão utilizando Programação Funcional</h3>
<div class="paragraph">
<p>Observando o diagrama base para a implementação do padrão Strategy, pode-se perceber que são criadas muitas classes e interfaces. As classes implementando essas interfaces não possuem atributos e têm apenas um único método que representa a implementação da estratégia em si.</p>
</div>
<div class="paragraph">
<p>Graças à Programação Funcional em diversas linguagens como Java 8+, JavaScript, Phython e outras, podemos simplificar este diagrama, e consequentemente a implementação, como mostra a figura a seguir.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/patterns/strategy/strategy-base-funcional-class-diagram.png" alt="strategy base funcional class diagram"></span></p>
</div>
<div class="paragraph">
<p>Observe que não temos mais as interfaces e classes específicas dos comportamentos. Cada comportamento nada mais é do que a implementação de um método (como o <code>executarComportamentoA()</code> do primeiro diagrama). O que precisamos de fato é permitir a troca da implementação de tal método em tempo de execução. Mas para isso, usando Programação Orientada a Objetos, tivemos que primeiro criar um conjunto de classes e interfaces pra isso.</p>
</div>
<div class="paragraph">
<p>Usando Programação Funcional podemos armazenar uma função em uma variável, no lugar de ter que armazenar um objeto inteiro que possui apenas um único método. A partir de tal variável, podemos então chamar a função. Se uma nova função for atribuída a tal variável, quando usarmos a variável novamente, estaremos chamando esta nova função, como espera-se que o padrão Strategy funcione.</p>
</div>
<div class="paragraph">
<p>No diagrama, o atributo como <code>comportamentoA</code> é do tipo <code>Function</code>, uma interface do Java 8+ (dentro muitas outras) que indica que o atributo contém uma referência para um método que a classe pode chamar, no lugar de armazenar um dado primitivo ou objeto convencional. Sendo que a referência para o método está armazenada em um atributo, se tivermos um método como o <code>comportamentoA1</code> mostrado no primeiro diagrama, podemos armazenar uma referência para tal método no atributo <code>comportamentoA</code>.
Se precisarmos fazer a super classe ou qualquer subclasse usar um comportamento diferente, podemos atribuir, por exemplo, o método <code>comportamentoA2</code> ao atributo <code>comportamentoA</code> em tempo de execução.</p>
</div>
<div class="paragraph">
<p><code>Function</code> é uma das interfaces em Java 8+ que permite representar métodos isolados e armazenar referências deles em variáveis.
Estas são chamadas de interfaces funcionais. Lembre-se que interfaces são como tipos. Assim como uma variável do tipo <code>int</code> indica que somente números inteiros podem ser armazenados nela, uma interface funcional indica o tipo de métodos que podem ser atribuídos a uma variável de tal tipo.
Em outras palavras, tais interfaces indicam que assinatura um método deve ter para ser possível atribuí-lo a uma variável cujo tipo é uma interface funcional.</p>
</div>
<div class="paragraph">
<p>Uma variável <code>Function</code> indica que podemos atribuir a ela qualquer método que receba um único parâmetro e retorne um determinado valor.
Se voltarmos ao exemplo dos boletos, a assinatura do nosso método que implementa os comportamentos de leitura dos arquivos de retorno é:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">List&lt;Boleto&gt; lerArquivo(String nomeArquivo)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe que tal função/método recebe um parâmetro (neste caso <code>String</code>) e retorna um valor (<code>List&lt;Boleto&gt;</code>).
Assim, uma função como <code>lerArquivo</code> pode então ser atribuída a uma variável do tipo <code>Function</code>.
Se você tiver um método com uma assinatura diferente e precisar armazenar tal método em um variável,
justamente para permitir trocar a implementação de tal método em tempo de execução usando Programação Funcional,
um ponto de partida é estudar a documentação do pacote <a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html">java.util.function</a> que descreve as interfaces funcionais padrões do Java 8+.</p>
</div>
<div class="paragraph">
<p>Programação funcional é um assunto bastante extenso que poderia ser um curso totalmente a parte,
que envolve muitos conceitos novos. Existe muito material disponível na internet.
Mas é difícil encontrar material gratuito, em português e abrangentes.
Existe muito material em inglês, mas novamente espalhado pela web.
Se desejarem aprofundar no assunto, acessem esta <a href="https://github.com/manoelcampos/sistemas-distribuidos/tree/master/projects/00-programacao-funcional">página</a>.</p>
</div>
<div class="paragraph">
<p>O código fonte do projeto usando programação funcional está disponível <a href="retorno-boleto-funcional">aqui</a> (<a href="https://kinolien.github.io/gitzip/?download=/manoelcampos/padroes-projetos/tree/master/comportamentais/strategy/retorno-boleto-funcional">zip</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Em linguagens distintas, a forma de implementar o padrão Strategy usando programação funcional é diferente.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_padrões_relacionados">3. Padrões Relacionados</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Padrões que possuem similaridades ou podem ser usados em conjunto:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Template Method</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_onde_o_padrão_é_usado_no_jdk">4. Onde o padrão é usado no JDK</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Um forma de identificar a aplicação do padrão Strategy nas classes do JDK que você usa é quando um método <strong>requer uma interface que possui apenas um método a ser implementado</strong>. Estas são chamadas de interfaces funcionais a partir do Java 8 (que possivelmente estão anotadas com <code>@FunctionalInterface</code>). A implementação de tal interface não é fornecida pelo JDK mas por você.
Você deve então fornecer um algoritmo (função) que será executado pela classe que estiver utilizando o padrão.</p>
</div>
<div class="sect2">
<h3 id="_list_sortcomparatort_comparator">4.1. List.sort(Comparator&lt;T&gt; comparator)</h3>
<div class="paragraph">
<p>Tal método da interface List permite ordenar os valores dentra da lista.
<code>Comparator</code> é uma interface cujas implementações representam as estratégias de ordenação de uma lista. <code>Comparator</code> é uma interface funcional, logo, conseguimos usar programação funcional para implementar as estratégias apenas criando-se funções. Assim, não temos que obrigatoriamente criar uma classe para cada estratégia. Como podemos implementar ordenação de uma infinidade de maneiras como:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>por ordem alfabética crescente ou descrescente;</p>
</li>
<li>
<p>utilizando algoritmos mais ou menos eficientes como Bubble Sort, Shell Sort, Quick Sort, etc</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>usar o padrão Strategy aqui faz todo o sentido. Podemos inclusive em um momento ordenar
uma lista de uma maneira e posteriormente decidirmos que queremos ordenar de outra maneira.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercícios">5. Exercícios</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_descontos">5.1. Descontos</h3>
<div class="paragraph">
<p>Considere que temos um sistema de vendas onde diferentes formas de desconto podem ser implementadas de acordo as promoções vigentes, como em datas comemorativas. O sistema deve permitir o cálculo do desconto sobre a venda das seguintes maneiras:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>percentual de desconto definido (que pode vir de um banco de dados);</p>
</li>
<li>
<p>percentual de desconto progressivo: <code>valor da compra/25</code>, não podendo ultrapassar 20%;</p>
</li>
<li>
<p>desconto de 15% na data de aniversário do cliente;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>E como poderíamos implementar estes tipos de desconto sem utilizar Padrões de Projetos?
Quais os problemas que tal implementação traria?</p>
</div>
</div>
<div class="sect2">
<h3 id="_ordenação_de_listas">5.2. Ordenação de Listas</h3>
<div class="paragraph">
<p>Ordenar uma lista de estudantes utilizando programação funcional no Java 8+.
O projeto disponível <a href="ordenar-lista-base">aqui</a> <a href="https://kinolien.github.io/gitzip/?download=/manoelcampos/padroes-projetos/tree/master/comportamentais/strategy/ordenar-lista-base">zip</a> pode ser usado como base, pois ele gera uma lista de estudantes aleatoriamente.</p>
</div>
</div>
<div class="sect2">
<h3 id="_diferenças_da_implementação_puramente_oo_vs_funcional">5.3. Diferenças da implementação puramente OO vs funcional</h3>
<div class="paragraph">
<p>A página inicial do <a href="retorno-boleto-funcional">projeto funcional disponível aqui</a> (<a href="https://kinolien.github.io/gitzip/?download=/manoelcampos/padroes-projetos/tree/master/comportamentais/strategy/retorno-boleto-funcional">zip</a>) apresenta algumas diferenças
de implementação do padrão Strategy utilizando puramente programação orientada a objetos e outra versão
utilizando programação funcional.</p>
</div>
<div class="paragraph">
<p>Descreva em detalhes qual a diferença em utilizar um atributo do tipo <code>LeituraRetorno</code> na implementação puramente OO
e um atributo do tipo <code>Function</code> na implementação funcional.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-02-14 16:42:42 -0300
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>